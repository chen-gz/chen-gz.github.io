---
import { CollectionEntry } from 'astro:content';

interface Props {
  chapters: CollectionEntry<'blog'>[];
  currentPage: CollectionEntry<'blog'>;
}

const { chapters, currentPage } = Astro.props;
const postTitle = currentPage.slug.split('/')[0].replace(/-/g, ' ');
---

<nav class="bg-gray-50 p-4 rounded-lg border border-gray-200">
  <h2 class="text-lg font-bold mb-1 capitalize text-gray-800">{postTitle}</h2>
  <p class="text-sm text-gray-500 mb-4">Table of Contents</p>
  <ul class="space-y-2">
    {chapters.map(chapter => {
      const isActive = chapter.slug === currentPage.slug;
      return (
        <li>
          <a
            href={`/blog/${chapter.slug}`}
            class:list={[
              "block p-2 rounded-md text-sm",
              isActive 
                ? "bg-blue-100 text-blue-700 font-bold" 
                : "text-gray-600 hover:bg-gray-100 hover:text-gray-900"
            ]}
          >
            {chapter.data.title}
          </a>
        </li>
      )
    })}
  </ul>
</nav>
